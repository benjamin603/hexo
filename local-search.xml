<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>PicGo+Cloudflare-R2存储做图床</title>
    <link href="/posts/32684.html"/>
    <url>/posts/32684.html</url>
    
    <content type="html"><![CDATA[<p>Cloudflare R2存储允许开发人员存储大量非结构化数据，而无需支付与典型云存储服务相关的昂贵出口带宽费用。也算是带宽联盟一员。类似于阿里云国际的OSS免费5G空间，流量收费，但是使用自定义域名套用Cloudflare的cdn就流量免费，Cloudflare自己的R2存储流量不收费，收费的是存储空间和请求次数。A类操作和B类操作分开收费，上传属于A类操作，下载和访问属于B类操作。</p><span id="more"></span><p><img src="https://r2.snbing.com/img/2024/02/image-20240202090853228.png" alt="R2 Pricing"></p><p>也就是说，可以免费存储10G的文件，每个月可以上传100万次，访问1000万次，假如用作图床，一般是用不到这个量级的。并且可以绑定自定义域名，套用页面规则以后可以设置浏览器缓存，这样可以减少一些请求次数并且可以防止被人刷请求次数导致一晚上过去，房子就不属于自己了。不自定义域名也是可以的，也就是说你甚至不需要拥有域名就可以拥有一个图床。</p><h2 id="开通R2"><a href="#开通R2" class="headerlink" title="开通R2"></a>开通R2</h2><p>首先当然是拥有一个Cloudflare账号，并且点击右上角的语言设置中文。</p><p>第一步当然是开通R2，侧边栏找到R2然后点击开通。这里可以绑定支持外币支付的卡，或者直接绑定paypal，中国区的paypal也是可以的。</p><p><img src="https://r2.snbing.com/img/2024/02/a2ca200d6ce03e2da268668f9631b961.webp" alt="开通R2"></p><h2 id="创建存储桶"><a href="#创建存储桶" class="headerlink" title="创建存储桶"></a>创建存储桶</h2><p><img src="https://r2.snbing.com/img/2024/02/image-20240202084558942.png" alt="创建存储桶"></p><blockquote><p>不建议无脑选亚太地区，亚太地区虽然近但是国际访问速度受限，我这里选择北美西部</p></blockquote><h2 id="自定义域名"><a href="#自定义域名" class="headerlink" title="自定义域名"></a>自定义域名</h2><p><img src="https://r2.snbing.com/img/2024/02/image-20240202084807613.png" alt="自定义域名"></p><p>选择<code>连接域</code>并输入自己想要的域名，如果域名已经托管至Cloudflare会自动解析，否则需要手动解析才会生效！</p><p><img src="https://r2.snbing.com/img/2024/02/image-20240202084936393.png" alt="自定义域名"></p><h2 id="开通API"><a href="#开通API" class="headerlink" title="开通API"></a>开通API</h2><p>回到R2<strong>的概述界面，点击右上角的 <strong>管理 R2 API 令牌，</strong> 然后点击右上角的</strong>创建api令牌****</p><p><img src="https://r2.snbing.com/img/2024/02/image-20240202085128691.png" alt="创建API"></p><blockquote><p><strong>权限</strong>：选择<strong>对象读和写</strong>；<strong>TTL</strong>：选择<strong>永久</strong></p><p>创建完成令牌以后请把<strong>访问密钥 ID</strong>和<strong>机密访问密钥</strong>收藏好，只会显示这一次，以后用的时候就找不到了，记下来以后还能用到。当然，如果没记住的话，以后再创建一个api令牌也是可以的</p></blockquote><h2 id="配置PicGo"><a href="#配置PicGo" class="headerlink" title="配置PicGo"></a>配置PicGo</h2><p>搜索并安装插件：<strong>S3 1.3.4</strong></p><p><img src="https://r2.snbing.com/img/2024/02/20240202082815.png" alt="配置PicGo"></p><p>插件配置：</p><table><thead><tr><th>选项</th><th>值</th></tr></thead><tbody><tr><td>图床配置名</td><td>任意填写</td></tr><tr><td>应用密钥 ID</td><td><strong>访问密钥 ID</strong></td></tr><tr><td>应用密钥</td><td><strong>机密访问密钥</strong></td></tr><tr><td>桶名</td><td>创建的R2桶名</td></tr><tr><td>文件路径</td><td>自定义（保持默认）</td></tr><tr><td>自定义节点</td><td><strong>存储桶详细信息</strong>中的<strong>S3 API</strong></td></tr><tr><td>自定义域名</td><td>填入第三步设定的自定义域名+桶名。例：<code>https://r2.snbing.com/img</code></td></tr></tbody></table>]]></content>
    
    
    <categories>
      
      <category>折腾记录</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Cloudflare</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>iPhone Photos备份至群晖NAS</title>
    <link href="/posts/35839.html"/>
    <url>/posts/35839.html</url>
    
    <content type="html"><![CDATA[<p>本文用来记录说明如何将iPhone Photos备份到Synology NAS。</p><span id="more"></span><blockquote><p>我想把iPhone上的照片和影片備份到Synology中，但是始終找到辦法完成這個任務。有沒有什麽快速的方法能幫助我備份iPhone到Synology？</p><p>- 來自Reddit的提問</p></blockquote><p>现在对于手机拍照的要求越来越高了，导致手机照片体积也越来越大。而且几乎80%的图片都存放在iPhone上，为了保护照片的安全，除了iCloud备份外，还需要另外一个物理存储空间，这个时候Synology NAS就排上用场了！</p><h2 id="Synology-NAS设置共享文件夹"><a href="#Synology-NAS设置共享文件夹" class="headerlink" title="Synology NAS设置共享文件夹"></a>Synology NAS设置共享文件夹</h2><p>登录Synology NAS，点击<code>File Station</code>，创建一个用来存放iPhone Photos的文件夹</p><h2 id="Windows设置"><a href="#Windows设置" class="headerlink" title="Windows设置"></a>Windows设置</h2><ol><li>使用<code>Windows + I</code>快捷键打开「设置」，在左侧菜单中选择「网络和 Intetnet」，然后点击右侧的「高级网络设置」选项。</li><li>选择「高级共享设置」，然后在「专用网络」下启用「网络发现」开关。</li><li>（可选）如果你计划与其他网络设备共享文件，可以打开「文件和打印机共享」开关。</li><li>网络发现在「公共网络」上默认关闭，在「专用网络」上默认开启。你还可以在「专用网络」上选择或取消勾选「自动设置网络连接的设备」。</li></ol><p><img src="https://r2.snbing.com/img/2024/02/65bbb03daf2e4.png" alt="高级共享设置"></p><h2 id="iPhone设置"><a href="#iPhone设置" class="headerlink" title="iPhone设置"></a>iPhone设置</h2><p>DS file非常适合管理存储在Synology NAS上的文件，例如，可通过安全HTTPS连接在NAS和Android设备之间上传和下载文件，或执行基本编辑任务。此外，DS file对于随时浏览图片、观看视频或查看工作文档也非常有用。</p><ol><li><p>在App Store搜索<code>DS file</code>安装并登录；</p></li><li><p>点击左上角更多（三横线图标），点击<code>照片备份</code> ，这时会要求再次登录NAS，登录后选择<a href="#Synology-NAS%E8%AE%BE%E7%BD%AE%E5%85%B1%E4%BA%AB%E6%96%87%E4%BB%B6%E5%A4%B9">Synology NAS设置共享文件夹</a>创建的文件夹</p><blockquote><p>建议连接wifi备份，以免浪费移动流量！</p></blockquote></li></ol><p>以上是关于iPhone备份到Synology NAS的全部内容，备份iPhone到Synology前，您需要先将Synology映射到Internet，然后在透过DS file将iPhone照片备份到Synology。</p>]]></content>
    
    
    <categories>
      
      <category>折腾记录</category>
      
    </categories>
    
    
    <tags>
      
      <tag>iPhone</tag>
      
      <tag>Photos</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Windows11系统备份</title>
    <link href="/posts/6081.html"/>
    <url>/posts/6081.html</url>
    
    <content type="html"><![CDATA[<p>对于我这种有点特殊洁癖的人来说，经常给自己的windows电脑做系统，伴随而来的就是各种环境、软件的安装配置，很浪费时间。所以系统备份就显得尤为重要了！</p><span id="more"></span><h2 id="Windows11系统备份"><a href="#Windows11系统备份" class="headerlink" title="Windows11系统备份"></a>Windows11系统备份</h2><p>打开控制面板 - 系统和安全 - 备份和还原(windows7) - 设置备份，我们可以选择本地磁盘或者网络路径，下文我们选择局域网NAS来存放备份文件！</p><p><img src="https://r2.snbing.com/img/2024/02/65bba39dbd0ba.png" alt="选择要保存备份的位置"></p><p>在NAS创建用于存放系统备份的共享文件夹，例：<code>system backup</code>，网络位置浏览刚才创建的NAS文件夹并填写NAS登录账户信息，点击下一步！</p><p><img src="https://r2.snbing.com/img/2024/02/65bba38f2815f.png" alt="选择网络位置"></p><p>备份内容我们根据自己的情况来选择，我这里除了系统C盘外，还需要备份D盘文件，所以选择了<code>让我选择</code></p><p><img src="https://r2.snbing.com/img/2024/02/65bba37fbbc24.png" alt="备份什么内容"></p><p>接下来就是选择更改计划，我们以周为单位让进行自动备份。</p><p><img src="https://r2.snbing.com/img/2024/02/65bba36b213e2.png" alt="多久备份一次"></p><p>最后我们点击完成！</p><div class="note note-info">            <p>等有时间了测试下使用系统备份来还原系统，查看能达到什么样的还原程度！</p>          </div>]]></content>
    
    
    <categories>
      
      <category>折腾记录</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Windows11</tag>
      
      <tag>系统备份</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>解决Git-Emoji-Commit插件BUG</title>
    <link href="/posts/145.html"/>
    <url>/posts/145.html</url>
    
    <content type="html"><![CDATA[<p>Visual Studio Code有个插件，Git Emoji Commit 中文版，可以在commit时添加emoji表情。但是最近出现BUG，无法点击。</p><span id="more"></span><p>上网搜了一下，发现很多朋友都遇到这个问题。<a href="https://github.com/maixiaojie/git-emoji-zh/issues/33">选中后不显示相应的emoji</a>。</p><p>不过有网友已经解决了，方法如下：</p><p>在<code>.vscode\extensions\maixiaojie.git-emoji-zh-1.1.9\out</code>目录下打开<code>extension.js</code>文件第23行：</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs diff"><span class="hljs-addition">+ return repository.rootUri.path === uri.rootUri.path;</span><br><span class="hljs-deletion">- return repository.rootUri.path === uri._rootUri.path;</span><br></code></pre></td></tr></table></figure><blockquote><p>删除rootUri前面的下划线即可！</p></blockquote><p>重启Visual Studio Code，搞定！</p>]]></content>
    
    
    <categories>
      
      <category>折腾记录</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>LskyPro&amp;PicGo配置</title>
    <link href="/posts/60266.html"/>
    <url>/posts/60266.html</url>
    
    <content type="html"><![CDATA[<p>之前已经搭建好兰空图床2.0版，博客写作平时使用<code>typora</code>来完成，所以打算通过<code>Picgo</code>+Typora并配合图床实现文章图片自动上传</p><span id="more"></span><h2 id="获取Tokens"><a href="#获取Tokens" class="headerlink" title="获取Tokens"></a>获取Tokens</h2><p>我们可以通过在线POST来获取Tokens，这里推荐一个在线的网页：<a href="http://coolaf.com/zh/tool/gp">http://coolaf.com/zh/tool/gp</a></p><ul><li>测试url：图床后台接口地址+tokens，如：<code>https://img.snbing.com/api/v1/tokens</code></li><li>POST参数：<code>email=邮箱&amp;password=密码</code></li></ul><h2 id="PicGo配置"><a href="#PicGo配置" class="headerlink" title="PicGo配置"></a>PicGo配置</h2><ol><li>Picgo-插件设置搜索<code>lankong</code>并安装插件；</li><li>配置插件参数：<ul><li><code>图床配置名</code>：任意填写</li><li><code>Lsky Pro Version</code>：在下拉菜单中选择 Lsky Pro 版本，<code>V1</code> 还是 <code>V2</code>，默认 <code>V1</code></li><li><code>Server</code>：填写图床地址，注意不要以 <code>/</code> 结束</li><li><code>Auth token</code>：使用 <code>Bearer </code>拼接</li><li><code>Strategy ID</code>：存储策略 ID，如果是 V1 或 V2 使用默认存储策略的用户，请留空；除非你知道具体 ID，否则请留空</li><li><code>Album ID</code>：相册 ID，只针对 V2 有效</li><li><code>Permission</code>：图片权限，公开还是私有，默认是私有</li><li><code>Sync Delete</code>：同步删除选项，只支持 <code>V2</code>，开启后在 PicGo 相册中删除图片可同步删除图床上的文件，默认关闭</li></ul></li></ol><h3 id="Well-Done"><a href="#Well-Done" class="headerlink" title="Well Done!"></a>Well Done!</h3>]]></content>
    
    
    <categories>
      
      <category>折腾记录</category>
      
    </categories>
    
    
    <tags>
      
      <tag>PicGo</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>1Panel部署兰空图床</title>
    <link href="/posts/59162.html"/>
    <url>/posts/59162.html</url>
    
    <content type="html"><![CDATA[<p>Lsky Pro 是一个用于在线上传、管理图片的图床程序，中文名：兰空图床，你可以将它作为自己的云上相册，亦可以当作你的写作贴图库。</p><span id="more"></span><h2 id="部署"><a href="#部署" class="headerlink" title="部署"></a>部署</h2><h3 id="安装应用"><a href="#安装应用" class="headerlink" title="安装应用"></a>安装应用</h3><p>1Panel后台 - 应用商店，搜索<code>Lsky-pro</code>并安装。</p><h3 id="反向代理"><a href="#反向代理" class="headerlink" title="反向代理"></a>反向代理</h3><p>网站 - 创建网站 - 反向代理：<br><img src="https://r2.snbing.com/img/2024/02/65bb590e08d66.png" alt="反向代理"></p><h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><p>首先在1Panel后台 - 容器确认数据库mysql的IP地址</p><p><img src="https://r2.snbing.com/img/2024/02/65bb5910b976a.png" alt="数据库IP地址"></p><p>其次在1Panel后台 - 数据库创建数据库</p><p><img src="https://r2.snbing.com/img/2024/02/65bb591197e02.png" alt="创建数据库"></p><p>浏览器访问域名地址，进行安装！</p>]]></content>
    
    
    <categories>
      
      <category>折腾记录</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Lsky</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Ubuntu部署1Panel</title>
    <link href="/posts/6110.html"/>
    <url>/posts/6110.html</url>
    
    <content type="html"><![CDATA[<p>阿里云ECS和NAS都使用了Docker部署服务，刚好接触了<a href="https://1panel.cn/">1Panel</a>面板，相对于宝塔面板，很是喜欢!</p><span id="more"></span><h2 id="部署"><a href="#部署" class="headerlink" title="部署"></a>部署</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">curl -sSL https://resource.fit2cloud.com/1panel/package/quick_start.sh -o quick_start.sh &amp;&amp; sudo bash quick_start.sh<br></code></pre></td></tr></table></figure><p>一条代码即可搞定！</p><blockquote><p>1Panel面板后台账号不支持使用过于简单的密码，在部署1Panel时却没有这种限制！</p></blockquote><h2 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h2><h3 id="添加备份账号"><a href="#添加备份账号" class="headerlink" title="添加备份账号"></a>添加备份账号</h3><p>目前将服务器一些应用、数据备份在阿里云OSS，后期会增加备份到Nas。</p><p><img src="https://r2.snbing.com/img/2024/02/65bb58be2e437.png" alt="备份账号"></p><h3 id="计划任务"><a href="#计划任务" class="headerlink" title="计划任务"></a>计划任务</h3><p><img src="https://r2.snbing.com/img/2024/02/65bb58c587e0f.png" alt="计划任务"></p><p>1Panel支持定时备份应用、网站、数据库等操作，挺方便，再也不担心服务器挂了导致数据丢失！</p><h2 id="应用"><a href="#应用" class="headerlink" title="应用"></a>应用</h2><ul><li><code>Memos</code> - 一款隐私优先的轻量级笔记服务，轻松捕捉并分享您的精彩想法。</li><li><code>Typecho</code> - 用来搭建Plog相册站点</li><li><code>Lsky-Pro</code> - 自建图床</li></ul>]]></content>
    
    
    <categories>
      
      <category>折腾记录</category>
      
    </categories>
    
    
    <tags>
      
      <tag>1Panel</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Docker搭建Twikoo</title>
    <link href="/posts/48744.html"/>
    <url>/posts/48744.html</url>
    
    <content type="html"><![CDATA[<p>一个简洁、安全、免费的静态网站评论系统。<br>A simple, safe, free comment system.</p><p>项目地址：<a href="https://github.com/twikoojs/twikoo">https://github.com/twikoojs/twikoo</a></p><p>文档地址：<a href="https://twikoo.js.org/">https://twikoo.js.org/</a></p><span id="more"></span><h2 id="部署"><a href="#部署" class="headerlink" title="部署"></a>部署</h2><p>使用以下命令搭建：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">docker run --name twikoo -e TWIKOO_THROTTLE=1000 -p 8080:8080 -v <span class="hljs-variable">$&#123;PWD&#125;</span>/data:/app/data -d imaegoo/twikoo<br></code></pre></td></tr></table></figure><blockquote><p>这里默认使用<code>8080</code>端口，如果服务器该端口已经被占用，请修改为其他未被使用的端口。</p></blockquote><p>我在服务器部署了<a href="https://1panel.cn/">1Panel</a>，我们来设置反向代理以及绑定域名。</p><ol><li><p>将域名解析到服务器地址，例：<code>tk.snbing.com</code> &gt; <code>43.xxx.xxx.xxx</code>；</p></li><li><p>在<code>1Panel</code>后台 - 网站 - 创建网站 - 反向代理：</p><ul><li>主域名 - 填入将使用的域名，例：<code>tk.bing.sn.cn</code></li><li>代号 - 随意 填写</li><li>代理地址 -127.0.0.1 + 端口</li></ul></li><li><p>访问域名地址，得到如下结果表示部署成功！</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html">&#123;&quot;code&quot;:100,&quot;message&quot;:&quot;Twikoo 云函数运行正常，请参考 https://twikoo.js.org/frontend.html 完成前端的配置&quot;,&quot;version&quot;:&quot;1.6.26&quot;&#125;<br></code></pre></td></tr></table></figure></li></ol><blockquote><p> 因为我在服务器部署了<a href="https://1panel.cn/">1Panel</a>，端口为<code>8080</code>，与Twikoo端口冲突，导致无法访问。所以将容器删掉，重新创建容器并配置新的端口，即可！</p></blockquote><h2 id="替换表情包"><a href="#替换表情包" class="headerlink" title="替换表情包"></a>替换表情包</h2><p><strong>Twikoo后台</strong> - <strong>插件</strong> - <strong>EMOTION_CDN</strong>可以自定义表情CDN，默认为<a href="https://owo.imaegoo.com/owo.json">https://owo.imaegoo.com/owo.json</a></p><p><a href="https://emotion.xiaokang.me/">表情速查</a>这里有大部分表情供我们使用，除了预览还有Twikoo代码直接使用感谢作者的分享！</p><p><img src="https://r2.snbing.com/img/2024/02/image-20240202100812970.png" alt="QQ表情"></p>]]></content>
    
    
    <categories>
      
      <category>折腾记录</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Twikoo</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>搭建Memos广场页面</title>
    <link href="/posts/25769.html"/>
    <url>/posts/25769.html</url>
    
    <content type="html"><![CDATA[<p>首先感谢<a href="https://dusays.com/">杜老师</a>分享的代码：</p><p>说说广场代码分享：<a href="https://dusays.com/578">https://dusays.com/578</a></p> <span id="more"></span><ol><li><p>新建页面，并关闭<code>lazyload</code>，开启的话会造成图片无法显示；</p></li><li><p>丢入一下代码到新页面：</p>    <div class="fold">      <div class="fold-title fold-info collapsed" data-toggle="collapse" href="#collapse-8f7bdefe" role="button" aria-expanded="false" aria-controls="collapse-8f7bdefe">        <div class="fold-arrow">▶</div>HTML      </div>      <div class="fold-collapse collapse" id="collapse-8f7bdefe">        <div class="fold-content">          <figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br></pre></td><td class="code"><pre><code class="hljs markdown"><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;bbs&quot;</span>&gt;</span></span><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;https://jsd.onmicrosoft.cn/npm/marked@4.3.0/marked.min.js&quot;</span>&gt;</span></span><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;https://jsd.onmicrosoft.cn/gh/Tokinx/ViewImage/view-image.min.js&quot;</span>&gt;</span></span><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;https://jsd.onmicrosoft.cn/gh/Tokinx/Lately/lately.min.js&quot;</span>&gt;</span></span><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span></span><br>if (typeof Lately === &#x27;undefined&#x27;) &#123;<br>  const script = document.createElement(&#x27;script&#x27;);<br>  script.src = &#x27;https://jsd.onmicrosoft.cn/gh/Tokinx/Lately/lately.min.js&#x27;;<br>  script.onload = () =&gt; &#123;<br><span class="hljs-code">    Lately.init(&#123; target: &#x27;.bbs-date&#x27; &#125;);</span><br><span class="hljs-code">  &#125;;</span><br><span class="hljs-code">  document.head.appendChild(script);</span><br><span class="hljs-code">&#125; else &#123;</span><br><span class="hljs-code">  Lately.init(&#123; target: &#x27;.bbs-date&#x27; &#125;);</span><br><span class="hljs-code">&#125;</span><br><span class="hljs-code">const urls = [</span><br><span class="hljs-code">  &#123;home:&quot;https://bing.sn.cn/&quot;,host:&quot;https://m.bing.sn.cn/&quot;,apiV1:&#x27;v1/&#x27;,creatorId:&quot;1&quot;,comment:&#x27;&#x27;,imgsrc:&quot;https://pic.yunshusong.cn/upic/20230204122856.jpg&quot;&#125;,</span><br><span class="hljs-code">  &#123;home:&quot;https://koobai.com/&quot;,host:&quot;https://memos.koobai.com/&quot;,apiV1:&#x27;v1/&#x27;,creatorId:&quot;1&quot;,comment:&#x27;&#x27;,imgsrc:&quot;https://cravatar.cn/avatar/3b3d336a7d389b7ae8531cbe177ae9b7&quot;&#125;,</span><br><span class="hljs-code">  &#123;home:&quot;https://immmmm.com/&quot;,host:&quot;https://me.edui.fun/&quot;,apiV1:&#x27;v1/&#x27;,creatorId:&quot;101&quot;,comment:&#x27;&#x27;,imgsrc:&quot;https://cravatar.cn/avatar/ba83fa02fc4b2ba621514941307e21be&quot;&#125;,</span><br><span class="hljs-code">  &#123;home:&quot;https://nuoea.com/&quot;,host:&quot;https://memos.nuoea.com/&quot;,apiV1:&#x27;v1/&#x27;,creatorId:&quot;101&quot;,comment:&#x27;&#x27;,imgsrc:&quot;https://cravatar.cn/avatar/020d365ea2596ef6d516143bb0552704&quot;&#125;,</span><br><span class="hljs-code">  &#123;home:&quot;https://eallion.com/&quot;,host:&quot;https://api.eallion.com/memos/&quot;,apiV1:&#x27;v1/&#x27;,creatorId:&quot;101&quot;,comment:&#x27;&#x27;,imgsrc:&quot;https://cravatar.cn/avatar/171e4c30959e8c077a6c58b958624b31&quot;&#125;,</span><br><span class="hljs-code">  &#123;home:&quot;https://www.skyue.com/&quot;,host:&quot;https://memos.skyue.com/&quot;,apiV1:&#x27;v1/&#x27;,creatorId:&quot;1&quot;,comment:&#x27;&#x27;,imgsrc:&quot;https://cravatar.cn/avatar/c3fb4bb4d5101284ddd672fb722cdd7d&quot;&#125;,</span><br><span class="hljs-code">  &#123;home:&quot;https://lms.im/&quot;,host:&quot;https://b.lms.im/&quot;,apiV1:&#x27;v1/&#x27;,creatorId:&quot;1&quot;,comment:&#x27;&#x27;,imgsrc:&quot;https://cravatar.cn/avatar/d9cc49ea0301640d7a19b6a1e77012dd&quot;&#125;,</span><br><span class="hljs-code">  &#123;home:&quot;https://dusays.com/&quot;,host:&quot;https://s.dusays.com/&quot;,apiV1:&#x27;v1/&#x27;,creatorId:&quot;1&quot;,comment:&#x27;&#x27;,imgsrc:&quot;https://cravatar.cn/avatar/28b57baa4e8f13fe4292ccb2de267e30&quot;&#125;,</span><br><span class="hljs-code">]</span><br><span class="hljs-code">var bbDom = document.querySelector(&#x27;#bbs&#x27;);</span><br><span class="hljs-code">var load = &#x27;&lt;div id=&quot;load&quot; onclick=&quot;nextFetch()&quot; &gt;&lt;button class=&quot;load-btn button-load&quot;&gt;加载更多&lt;/button&gt;&lt;/div&gt;&#x27;</span><br><span class="hljs-code">var loading = &#x27;&lt;div class=&quot;loader&quot;&gt;&lt;svg class=&quot;circular&quot; viewBox=&quot;25 25 50 50&quot;&gt;&lt;circle class=&quot;path&quot; cx=&quot;50&quot; cy=&quot;50&quot; r=&quot;20&quot; fill=&quot;none&quot; stroke-width=&quot;2&quot; stroke-miterlimit=&quot;10&quot;/&gt;&lt;/svg&gt;&lt;/div&gt;&#x27;</span><br><span class="hljs-code">var bbsDatas = [],bbsData = &#123;&#125;,nextDatas = [],nextData = &#123;&#125;,limit = 10</span><br><span class="hljs-code">var page = 1,offset = 0,nextLength = 0,nextDom=&#x27;&#x27;,bbUrlNow = &#x27;&#x27;,imgsrcNow = &#x27;&#x27;,hostNow = &#x27;&#x27;,creIdNow = &#x27;&#x27;,commentNow = &#x27;&#x27;,twiEnvNow=&#x27;&#x27;,artEnvNow=&#x27;&#x27;,artSiteNow=&#x27;&#x27;</span><br><span class="hljs-code">bbDom.innerHTML = loading</span><br><span class="hljs-code">allUrls()</span><br><span class="hljs-code">function allUrls()&#123;</span><br><span class="hljs-code">  var myHtml = &#x27;&#x27;</span><br><span class="hljs-code">  for(var i=0;i &lt; urls.length;i++)&#123;</span><br><span class="hljs-code">    myHtml += &#x27;&lt;div class=&quot;bbs-urls bbs-url&quot; onclick=&quot;urlsNow(this)&quot; data-hostid=&quot;&#x27;+urls[i].host+&quot;u/&quot;+urls[i].creatorId+&#x27;&quot; data-host=&quot;&#x27;+urls[i].host+&#x27;&quot; data-apiV1=&quot;&#x27;+urls[i].apiV1+&#x27;&quot; data-creatorId=&quot;&#x27;+urls[i].creatorId+&#x27;&quot; data-imgsrc=&quot;&#x27;+urls[i].imgsrc+&#x27;&quot; data-comment=&quot;&#x27;+urls[i].comment+&#x27;&quot; data-home=&quot;&#x27;+urls[i].home+&#x27;&quot; data-twienv=&quot;&#x27;+urls[i].twiEnv+&#x27;&quot; data-artenv=&quot;&#x27;+urls[i].artEnv+&#x27;&quot; data-artsite=&quot;&#x27;+urls[i].artSite+&#x27;&quot; data-index=&quot;&#x27;+i+&#x27;&quot;&gt;&lt;img src=&quot;&#x27;+urls[i].imgsrc+&#x27;&quot; alt=&quot;&quot;&gt;&lt;/div&gt;&#x27;</span><br><span class="hljs-code">  &#125;</span><br><span class="hljs-code">  myHtml += &#x27;&lt;div class=&quot;bbs-urls urls-button&quot; onclick=&quot;urlsNow(this)&quot; data-type=&quot;random&quot;&gt;&lt;svg t=&quot;1665928089691&quot; class=&quot;icon&quot; viewBox=&quot;0 0 1024 1024&quot; version=&quot;1.1&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot; p-id=&quot;2562&quot; width=&quot;32&quot; height=&quot;32&quot;&gt;&lt;path d=&quot;M913.2 672l98.8 57.1c5.3 3.1 5.3 10.8 0 13.9l-43.4 25L710.4 924c-2.7 1.5-6-0.4-6-3.5V772c0-2.2-1.8-4-4-4H544c-70.4 0-134.4-28.8-180.8-75.2-11.1-11.1-21.2-23.2-30.1-36.1-6.4-9.2-20-9.1-26.4 0.1C260.5 723.9 183.1 768 96 768h-48c-26.5 0-48-21.5-48-48s21.5-48 48-48h48c42.5 0 82.6-16.7 112.9-47.1 30.4-30.4 47.1-70.5 47.1-112.9s-16.7-82.6-47.1-112.9C178.6 368.7 138.4 352 96 352h-48c-26.5 0-48-21.5-48-48s21.5-48 48-48h48c70.4 0 134.4 28.8 180.8 75.2 11.1 11.1 21.2 23.2 30.1 36.1 6.4 9.2 20 9.1 26.4-0.1 46.3-67 123.6-111.1 210.8-111.1H700.4c2.2 0 4-1.8 4-4V103.4c0-3.1 3.3-5 6-3.5l258.2 156 43.4 25.1c5.3 3.1 5.3 10.8 0 13.9L913.2 352 710.4 476c-2.7 1.5-6-0.4-6-3.5V356c0-2.2-1.8-4-4-4H544c-42.5 0-82.6 16.7-112.9 47.1-30.4 30.4-47.1 70.5-47.1 112.9 0 42.5 16.7 82.6 47.1 112.9C461.4 655.3 501.5 672 544 672H700.4c2.2 0 4-1.8 4-4V551.4c0-3.1 3.3-5 6-3.5L913.2 672z&quot; p-id=&quot;2563&quot; fill=&quot;#f5f5f5&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/div&gt;&#x27;</span><br><span class="hljs-code">  myHtml += &#x27;&lt;div class=&quot;bbs-urls urls-button&quot;&gt;&lt;a target=&quot;_blank&quot; rel=&quot;noopener&quot; href=&quot;https://memos.dongjunke.cn/&quot;&gt;&lt;svg t=&quot;1665929410343&quot; class=&quot;icon&quot; viewBox=&quot;0 0 1024 1024&quot; version=&quot;1.1&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot; p-id=&quot;6308&quot; width=&quot;32&quot; height=&quot;32&quot;&gt;&lt;path d=&quot;M906.212134 565.732986 565.732986 565.732986 565.732986 906.212134C565.732986 926.013685 541.666486 959.972 511.97312 959.972 482.297674 959.972 458.213254 926.013685 458.213254 906.212134L458.213254 565.732986 117.734106 565.732986C97.950475 565.732986 63.97424 541.666486 63.97424 511.97312 63.97424 482.279754 97.950475 458.213254 117.734106 458.213254L458.213254 458.213254 458.213254 117.734106C458.213254 97.950475 482.297674 63.97424 511.97312 63.97424 541.666486 63.97424 565.732986 97.950475 565.732986 117.734106L565.732986 458.213254 906.212134 458.213254C925.995765 458.213254 959.972 482.279754 959.972 511.97312 959.972 541.666486 925.995765 565.732986 906.212134 565.732986Z&quot; p-id=&quot;6309&quot; fill=&quot;#f5f5f5&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;/div&gt;&#x27;</span><br><span class="hljs-code">  myHtml = &#x27;&lt;div id=&quot;bbs-urls&quot;&gt;&#x27;+myHtml+&#x27;&lt;/div&gt;&#x27;</span><br><span class="hljs-code">  bbDom.insertAdjacentHTML(&#x27;beforebegin&#x27;, myHtml);</span><br><span class="hljs-code">&#125;</span><br><span class="hljs-code">function nextFetch()&#123;</span><br><span class="hljs-code">  document.querySelector(&quot;button.button-load&quot;).textContent= &#x27;加载中……&#x27;;</span><br><span class="hljs-code">  updateHTMl(nextDatas)</span><br><span class="hljs-code">  if(nextLength &lt; 10)&#123;</span><br><span class="hljs-code">    document.querySelector(&quot;button.button-load&quot;).remove()</span><br><span class="hljs-code">    return</span><br><span class="hljs-code">  &#125;</span><br><span class="hljs-code">  getNextList()</span><br><span class="hljs-code">&#125;;</span><br><span class="hljs-code">function urlsNow(e)&#123;</span><br><span class="hljs-code">  var domUrls = document.querySelectorAll(&#x27;#bbs-urls .bbs-urls&#x27;)</span><br><span class="hljs-code">  if(e.classList.contains(&#x27;url-now&#x27;))&#123;</span><br><span class="hljs-code">    domUrls[e.getAttribute(&quot;data-index&quot;)].classList.remove(&quot;url-now&quot;)</span><br><span class="hljs-code">    fetchBBser()</span><br><span class="hljs-code">  &#125;else&#123;</span><br><span class="hljs-code">    domUrls.forEach(function(value,index)&#123; domUrls[index].classList.remove(&quot;url-now&quot;)&#125;)</span><br><span class="hljs-code">    var btn = document.querySelector(&#x27;button.button-load&#x27;)</span><br><span class="hljs-code">    if(btn)&#123;btn.remove()&#125;</span><br><span class="hljs-code">    page = 1,offset = 0</span><br><span class="hljs-code">    bbDom.innerHTML = loading</span><br><span class="hljs-code">    var type = e.getAttribute(&quot;data-type&quot;)</span><br><span class="hljs-code">    if(type == &#x27;random&#x27;)&#123;</span><br><span class="hljs-code">      var num = Math.round(Math.random() * (urls.length-1))</span><br><span class="hljs-code">      hostNow = urls[num].host</span><br><span class="hljs-code">      creIdNow = urls[num].creatorId</span><br><span class="hljs-code">      imgsrcNow = urls[num].imgsrc</span><br><span class="hljs-code">      commentNow = urls[num].comment</span><br><span class="hljs-code">      twiEnvNow = urls[num].twiEnv</span><br><span class="hljs-code">      artEnvNow = urls[num].artEnv</span><br><span class="hljs-code">      artSiteNow = urls[num].artSite</span><br><span class="hljs-code">      homeNow = urls[num].home</span><br><span class="hljs-code">      apiV1Now = urls[num].apiV1</span><br><span class="hljs-code">      domUrls[num].classList.add(&quot;url-now&quot;)</span><br><span class="hljs-code">    &#125;else&#123;</span><br><span class="hljs-code">      domUrls[e.getAttribute(&quot;data-index&quot;)].classList.add(&quot;url-now&quot;)</span><br><span class="hljs-code">      hostNow = e.getAttribute(&quot;data-host&quot;)</span><br><span class="hljs-code">      creIdNow = e.getAttribute(&quot;data-creatorId&quot;)</span><br><span class="hljs-code">      imgsrcNow = e.getAttribute(&quot;data-imgsrc&quot;)</span><br><span class="hljs-code">      commentNow = e.getAttribute(&quot;data-comment&quot;)</span><br><span class="hljs-code">      twiEnvNow = e.getAttribute(&quot;data-twienv&quot;)</span><br><span class="hljs-code">      artEnvNow = e.getAttribute(&quot;data-artenv&quot;)</span><br><span class="hljs-code">      artSiteNow = e.getAttribute(&quot;data-artsite&quot;)</span><br><span class="hljs-code">      homeNow = e.getAttribute(&quot;data-home&quot;)</span><br><span class="hljs-code">      apiV1Now = e.getAttribute(&quot;data-apiV1&quot;)</span><br><span class="hljs-code">    &#125;</span><br><span class="hljs-code">    bbUrlNow = hostNow+&quot;api/&quot;+apiV1Now+&quot;memo?creatorId=&quot;+creIdNow+&quot;&amp;rowStatus=NORMAL&amp;limit=10&quot;</span><br><span class="hljs-code">    fetch(bbUrlNow).then(res =&gt; res.json()).then( resdata =&gt;&#123;</span><br><span class="hljs-code">      var arrData = resdata || &#x27;&#x27;</span><br><span class="hljs-code">      if(resdata.data)&#123;</span><br><span class="hljs-code">        arrData = resdata.data</span><br><span class="hljs-code">      &#125;</span><br><span class="hljs-code">      bbDom.innerHTML = &#x27;&#x27;</span><br><span class="hljs-code">      bbsDatas.length = 0</span><br><span class="hljs-code">      for(var j=0;j &lt; arrData.length;j++)&#123;</span><br><span class="hljs-code">            var resValue = arrData[j]</span><br><span class="hljs-code">            bbsData = &#123;</span><br><span class="hljs-code">              memoId: resValue.id,</span><br><span class="hljs-code">              updatedTs: resValue.updatedTs,</span><br><span class="hljs-code">              creatorId:resValue.creatorId,</span><br><span class="hljs-code">              creator: resValue.creatorName || resValue.creator.nickname || resValue.creator.name,</span><br><span class="hljs-code">              imgsrc: imgsrcNow,</span><br><span class="hljs-code">              content: resValue.content,</span><br><span class="hljs-code">              resourceList: resValue.resourceList,</span><br><span class="hljs-code">              url:hostNow,</span><br><span class="hljs-code">              twiEnv:twiEnvNow,</span><br><span class="hljs-code">              artEnv:artEnvNow,</span><br><span class="hljs-code">              artSite:artSiteNow,</span><br><span class="hljs-code">              home:homeNow,</span><br><span class="hljs-code">              comment: commentNow</span><br><span class="hljs-code">            &#125;</span><br><span class="hljs-code">            bbsDatas.push(bbsData)</span><br><span class="hljs-code">      &#125;</span><br><span class="hljs-code">      updateHTMl(bbsDatas)</span><br><span class="hljs-code">      bbDom.insertAdjacentHTML(&#x27;afterend&#x27;, load);</span><br><span class="hljs-code">      var nowLength = bbsData.length</span><br><span class="hljs-code">      if(nowLength &lt; 10)&#123;</span><br><span class="hljs-code">        document.querySelector(&quot;button.button-load&quot;).remove()</span><br><span class="hljs-code">        return</span><br><span class="hljs-code">      &#125;</span><br><span class="hljs-code">      page++</span><br><span class="hljs-code">      offset = 10*(page-1)</span><br><span class="hljs-code">      getNextList()</span><br><span class="hljs-code">    &#125;);</span><br><span class="hljs-code">  &#125;</span><br><span class="hljs-code">&#125;</span><br><span class="hljs-code">function getNextList()&#123;</span><br><span class="hljs-code">  var bbUrl = bbUrlNow+&quot;&amp;offset=&quot;+offset;</span><br><span class="hljs-code">  fetch(bbUrl).then(res =&gt; res.json()).then( resdata =&gt;&#123;</span><br><span class="hljs-code">    var arrData = resdata || &#x27;&#x27;</span><br><span class="hljs-code">    if(resdata.data)&#123;</span><br><span class="hljs-code">      arrData = resdata.data</span><br><span class="hljs-code">    &#125;</span><br><span class="hljs-code">    nextDom = arrData</span><br><span class="hljs-code">    nextLength = nextDom.length</span><br><span class="hljs-code">    page++</span><br><span class="hljs-code">    offset = 10*(page-1)</span><br><span class="hljs-code">    if(nextLength &lt; 1)&#123;</span><br><span class="hljs-code">      document.querySelector(&quot;button.button-load&quot;).remove()</span><br><span class="hljs-code">      return</span><br><span class="hljs-code">    &#125;</span><br><span class="hljs-code">    nextDatas.length = 0</span><br><span class="hljs-code">    for(var j=0;j &lt; nextDom.length;j++)&#123;</span><br><span class="hljs-code">      var resValue = nextDom[j]</span><br><span class="hljs-code">      nextData = &#123;</span><br><span class="hljs-code">        updatedTs: resValue.updatedTs,</span><br><span class="hljs-code">        creatorId:resValue.creatorId,</span><br><span class="hljs-code">        creator: resValue.creatorName || resValue.creator.nickname || resValue.creator.name,</span><br><span class="hljs-code">        imgsrc: imgsrcNow,</span><br><span class="hljs-code">        content: resValue.content,</span><br><span class="hljs-code">        resourceList: resValue.resourceList,</span><br><span class="hljs-code">        url:hostNow,</span><br><span class="hljs-code">        twiEnv:twiEnvNow,</span><br><span class="hljs-code">        artEnv:artEnvNow,</span><br><span class="hljs-code">        artSite:artSiteNow,</span><br><span class="hljs-code">        comment:commentNow,</span><br><span class="hljs-code">        memoId: resValue.id,</span><br><span class="hljs-code">        home:homeNow,</span><br><span class="hljs-code">      &#125;</span><br><span class="hljs-code">      nextDatas.push(nextData)</span><br><span class="hljs-code">    &#125;</span><br><span class="hljs-code">  &#125;)</span><br><span class="hljs-code">&#125;</span><br><span class="hljs-code">const withTimeout = (millis, promise) =&gt; &#123;</span><br><span class="hljs-code">  const timeout = new Promise((resolve, reject) =&gt;</span><br><span class="hljs-code">      setTimeout( () =&gt; reject(`Timed out after ms.`),millis));</span><br><span class="hljs-code">  return Promise.race([</span><br><span class="hljs-code">      promise,</span><br><span class="hljs-code">      timeout</span><br><span class="hljs-code">  ]);</span><br><span class="hljs-code">&#125;;</span><br><span class="hljs-code">const fetchBBser = async () =&gt; &#123;</span><br><span class="hljs-code">  const results = await Promise.allSettled(urls.map(</span><br><span class="hljs-code">    url =&gt; withTimeout(2000,</span><br><span class="hljs-code">      fetch(url.host+&quot;api/&quot;+url.apiV1+&quot;memo?creatorId=&quot;+url.creatorId+&quot;&amp;rowStatus=NORMAL&amp;limit=&quot;+limit).then(response =&gt; response.json()).then(resdata =&gt; &#123;</span><br><span class="hljs-code">        var qsLive = &quot;.bbs-urls.bbs-url[data-hostid=&#x27;&quot;+url.host+&quot;u/&quot;+url.creatorId+&quot;&#x27;]&quot;</span><br><span class="hljs-code">        document.querySelector(qsLive).classList.add(&quot;liveon&quot;);</span><br><span class="hljs-code">        var arrData = resdata || &#x27;&#x27;</span><br><span class="hljs-code">        if(resdata.data)&#123;</span><br><span class="hljs-code">          arrData = resdata.data</span><br><span class="hljs-code">        &#125;</span><br><span class="hljs-code">        return arrData</span><br><span class="hljs-code">      &#125;)</span><br><span class="hljs-code">    )</span><br><span class="hljs-code">  )).then(results=&gt; &#123;</span><br><span class="hljs-code">    bbDom.innerHTML = &#x27;&#x27;</span><br><span class="hljs-code">    for(var i=0;i &lt; results.length;i++)&#123;</span><br><span class="hljs-code">      var status = results[i].status</span><br><span class="hljs-code">      if(status == &quot;fulfilled&quot;)&#123;</span><br><span class="hljs-code">        var resultsRes = results[i].value</span><br><span class="hljs-code">        for(var j=0;j &lt; resultsRes.length;j++)&#123;</span><br><span class="hljs-code">          var resValue = resultsRes[j]</span><br><span class="hljs-code">          var dateNow = new Date()</span><br><span class="hljs-code">          var dateDiff = dateNow.getTime() - (resValue.updatedTs * 1000);</span><br><span class="hljs-code">          var dayDiff = Math.floor(dateDiff / (24 * 3600 * 1000));</span><br><span class="hljs-code">          if(dayDiff &lt; 10 )&#123;</span><br><span class="hljs-code">            bbsData = &#123;</span><br><span class="hljs-code">              memoId: resValue.id,</span><br><span class="hljs-code">              updatedTs: resValue.updatedTs,</span><br><span class="hljs-code">              creatorId:resValue.creatorId,</span><br><span class="hljs-code">              creator: resValue.creatorName || resValue.creator.nickname || resValue.creator.name,</span><br><span class="hljs-code">              imgsrc: urls[i].imgsrc,</span><br><span class="hljs-code">              content: resValue.content,</span><br><span class="hljs-code">              resourceList: resValue.resourceList,</span><br><span class="hljs-code">              home:urls[i].home,</span><br><span class="hljs-code">              url:urls[i].host,</span><br><span class="hljs-code">              comment:urls[i].comment,</span><br><span class="hljs-code">              twiEnv:urls[i].twiEnv || &#x27;&#x27;,</span><br><span class="hljs-code">              artEnv:urls[i].artEnv || &#x27;&#x27;,</span><br><span class="hljs-code">              artSite:urls[i].artSite || &#x27;&#x27;</span><br><span class="hljs-code">            &#125;</span><br><span class="hljs-code">            bbsDatas.push(bbsData)</span><br><span class="hljs-code">          &#125;</span><br><span class="hljs-code">        &#125;</span><br><span class="hljs-code">      &#125;</span><br><span class="hljs-code">    &#125;</span><br><span class="hljs-code">    bbsDatas.sort(compare(&quot;updatedTs&quot;));</span><br><span class="hljs-code">    updateHTMl(bbsDatas)</span><br><span class="hljs-code">  &#125;)</span><br><span class="hljs-code">&#125;</span><br><span class="hljs-code">fetchBBser()</span><br><span class="hljs-code">function compare(p)&#123;</span><br><span class="hljs-code">  return function(m,n)&#123;</span><br><span class="hljs-code">      var a = m[p];</span><br><span class="hljs-code">      var b = n[p];</span><br><span class="hljs-code">      return b - a;</span><br><span class="hljs-code">  &#125;</span><br><span class="hljs-code">&#125;</span><br><span class="hljs-code">function uniqueFunc(arr)&#123;</span><br><span class="hljs-code">  const res = new Map();</span><br><span class="hljs-code">  return arr.filter((item) =&gt; !res.has(item.creator) &amp;&amp; res.set(item.creator, 1));</span><br><span class="hljs-code">&#125;</span><br><span class="hljs-code">function updateHTMl(data)&#123;</span><br><span class="hljs-code">  var result=&quot;&quot;,resultAll=&quot;&quot;;</span><br><span class="hljs-code">  const TAG_REG = /#([^\s#]+)/;</span><br><span class="hljs-code">  const IMG_REG = /\!\[(.*?)\]\((.*?)\)/g;</span><br><span class="hljs-code">  BILIBILI_REG = /&lt;a.*?href=&quot;https:\/\/www\.bilibili\.com\/video\/((av[\d]&#123;1,10&#125;)|(BV([\w]&#123;10&#125;)))\/?&quot;.*?&gt;.*&lt;\/a&gt;/g;</span><br><span class="hljs-code">  NETEASE_MUSIC_REG = /&lt;a.*?href=&quot;https:\/\/music\.163\.com\/.*id=([0-9]+)&quot;.*?&gt;.*&lt;\/a&gt;/g;</span><br><span class="hljs-code">  QQMUSIC_REG = /&lt;a.*?href=&quot;https\:\/\/y\.qq\.com\/.*(\/[0-9a-zA-Z]+)(\.html)?&quot;.*?&gt;.*?&lt;\/a&gt;/g;</span><br><span class="hljs-code">  QQVIDEO_REG = /&lt;a.*?href=&quot;https:\/\/v\.qq\.com\/.*\/([a-z|A-Z|0-9]+)\.html&quot;.*?&gt;.*&lt;\/a&gt;/g;</span><br><span class="hljs-code">  YOUKU_REG = /&lt;a.*?href=&quot;https:\/\/v\.youku\.com\/.*\/id_([a-z|A-Z|0-9|==]+)\.html&quot;.*?&gt;.*&lt;\/a&gt;/g;</span><br><span class="hljs-code">  YOUTUBE_REG = /&lt;a.*?href=&quot;https:\/\/www\.youtube\.com\/watch\?v\=([a-z|A-Z|0-9]&#123;11&#125;)\&quot;.*?&gt;.*&lt;\/a&gt;/g;</span><br><span class="hljs-code">  marked.setOptions(&#123;</span><br><span class="hljs-code">    breaks: true,</span><br><span class="hljs-code">    smartypants: false,</span><br><span class="hljs-code">    langPrefix: &#x27;language-&#x27;</span><br><span class="hljs-code">  &#125;);</span><br><span class="hljs-code">  const renderer = new marked.Renderer();</span><br><span class="hljs-code">  const linkRenderer = renderer.link;</span><br><span class="hljs-code">  renderer.link = (href, title, text) =&gt; &#123;</span><br><span class="hljs-code">      const localLink = href.startsWith(`$&#123;location.protocol&#125;//$&#123;location.hostname&#125;`);</span><br><span class="hljs-code">      const html = linkRenderer.call(renderer, href, title, text);</span><br><span class="hljs-code">      return localLink ? html : html.replace(/^&lt;a /, `&lt;a target=&quot;_blank&quot; rel=&quot;noreferrer noopener nofollow&quot; `);</span><br><span class="hljs-code">  &#125;;</span><br><span class="hljs-code">  marked.use(&#123; renderer &#125;);</span><br><span class="hljs-code">  for(var i=0;i &lt; data.length;i++)&#123;</span><br><span class="hljs-code">      var memos = data[i].url</span><br><span class="hljs-code">      var memoId = data[i].memoId</span><br><span class="hljs-code">      var memoUrl = memos + &quot;m/&quot; + memoId</span><br><span class="hljs-code">      var comment = data[i].comment</span><br><span class="hljs-code">      var twiEnv = data[i].twiEnv</span><br><span class="hljs-code">      var artEnv = data[i].artEnv</span><br><span class="hljs-code">      var artSite = data[i].artSite</span><br><span class="hljs-code">      var bbContREG = data[i].content</span><br><span class="hljs-code">        .replace(TAG_REG, &quot;&lt;span class=&#x27;tag-span&#x27;&gt;#$1&lt;/span&gt; &quot;)</span><br><span class="hljs-code">        .replace(IMG_REG, &#x27;&#x27;)</span><br><span class="hljs-code">      bbContREG = marked.parse(bbContREG)</span><br><span class="hljs-code">        .replace(BILIBILI_REG, &quot;&lt;div class=&#x27;video-wrapper&#x27;&gt;&lt;iframe src=&#x27;//www.bilibili.com/blackboard/html5mobileplayer.html?bvid=$1&amp;as_wide=1&amp;high_quality=1&amp;danmaku=0&#x27; scrolling=&#x27;no&#x27; border=&#x27;0&#x27; frameborder=&#x27;no&#x27; framespacing=&#x27;0&#x27; allowfullscreen=&#x27;true&#x27;&gt;&lt;/iframe&gt;&lt;/div&gt;&quot;)</span><br><span class="hljs-code">        .replace(NETEASE_MUSIC_REG, &quot;&lt;meting-js auto=&#x27;https://music.163.com/#/song?id=$1&#x27;&gt;&lt;/meting-js&gt;&quot;)</span><br><span class="hljs-code">        .replace(QQMUSIC_REG, &quot;&lt;meting-js auto=&#x27;https://y.qq.com/n/yqq/song$1.html&#x27;&gt;&lt;/meting-js&gt;&quot;)</span><br><span class="hljs-code">        .replace(QQVIDEO_REG, &quot;&lt;div class=&#x27;video-wrapper&#x27;&gt;&lt;iframe src=&#x27;//v.qq.com/iframe/player.html?vid=$1&#x27; allowFullScreen=&#x27;true&#x27; frameborder=&#x27;no&#x27;&gt;&lt;/iframe&gt;&lt;/div&gt;&quot;)</span><br><span class="hljs-code">        .replace(YOUKU_REG, &quot;&lt;div class=&#x27;video-wrapper&#x27;&gt;&lt;iframe src=&#x27;https://player.youku.com/embed/$1&#x27; frameborder=0 &#x27;allowfullscreen&#x27;&gt;&lt;/iframe&gt;&lt;/div&gt;&quot;)</span><br><span class="hljs-code">        .replace(YOUTUBE_REG, &quot;&lt;div class=&#x27;video-wrapper&#x27;&gt;&lt;iframe src=&#x27;https://www.youtube.com/embed/$1&#x27; title=&#x27;YouTube video player&#x27; frameborder=&#x27;0&#x27; allow=&#x27;accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture&#x27; allowfullscreen title=&#x27;YouTube Video&#x27;&gt;&lt;/iframe&gt;&lt;/div&gt;&quot;)</span><br><span class="hljs-code">      var IMG_ARR = data[i].content.match(IMG_REG) || &#x27;&#x27;,IMG_ARR_Grid=&#x27;&#x27;;</span><br><span class="hljs-code">      if(IMG_ARR)&#123;</span><br><span class="hljs-code">        var IMG_ARR_Length = IMG_ARR.length,IMG_ARR_Url = &#x27;&#x27;;</span><br><span class="hljs-code">        if(IMG_ARR_Length !== 1)&#123;var IMG_ARR_Grid = &quot; grid grid-&quot;+IMG_ARR_Length&#125;</span><br><span class="hljs-code">        IMG_ARR.forEach(item =&gt; &#123;</span><br><span class="hljs-code">            let imgSrc = item.replace(/!\[.*?\]\((.*?)\)/g,&#x27;$1&#x27;)</span><br><span class="hljs-code">            IMG_ARR_Url += &#x27;&lt;figure class=&quot;gallery-thumbnail&quot;&gt;&lt;img class=&quot;img thumbnail-image&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot; src=&quot;&#x27;+imgSrc+&#x27;&quot;/&gt;&lt;/figure&gt;&#x27;</span><br><span class="hljs-code">        &#125;);</span><br><span class="hljs-code">        bbContREG += &#x27;&lt;div class=&quot;resimg&#x27;+IMG_ARR_Grid+&#x27;&quot;&gt;&#x27;+IMG_ARR_Url+&#x27;&lt;/div&gt;&#x27;;</span><br><span class="hljs-code">      &#125;</span><br><span class="hljs-code">      var tagArr = data[i].content.match(TAG_REG);</span><br><span class="hljs-code">      var bbContTag = &#x27;&#x27;;</span><br><span class="hljs-code">      if (tagArr) &#123;</span><br><span class="hljs-code">          bbContTag = String(tagArr[0]).replace(/[#]/g, &#x27;&#x27;);</span><br><span class="hljs-code">      &#125; else &#123;</span><br><span class="hljs-code">          bbContTag = &#x27;动态&#x27;;</span><br><span class="hljs-code">      &#125;;</span><br><span class="hljs-code">      if(data[i].resourceList &amp;&amp; data[i].resourceList.length &gt; 0)&#123;</span><br><span class="hljs-code">        var resourceList = data[i].resourceList;</span><br><span class="hljs-code">        var imgUrl=&#x27;&#x27;,resUrl=&#x27;&#x27;,resImgLength = 0;</span><br><span class="hljs-code">        for(var j=0;j &lt; resourceList.length;j++)&#123;</span><br><span class="hljs-code">          var restype = resourceList[j].type.slice(0,5);</span><br><span class="hljs-code">          var resexlink = resourceList[j].externalLink</span><br><span class="hljs-code">          var resLink = &#x27;&#x27;,fileId=&#x27;&#x27;</span><br><span class="hljs-code">          if(resexlink)&#123;</span><br><span class="hljs-code">            resLink = resexlink</span><br><span class="hljs-code">          &#125;else&#123;</span><br><span class="hljs-code">            fileId = resourceList[j].publicId || resourceList[j].filename</span><br><span class="hljs-code">            resLink = memos+&#x27;o/r/&#x27;+resourceList[j].id+&#x27;/&#x27;+fileId</span><br><span class="hljs-code">          &#125;</span><br><span class="hljs-code">          if(restype == &#x27;image&#x27;)&#123;</span><br><span class="hljs-code">            imgUrl += &#x27;&lt;figure class=&quot;gallery-thumbnail&quot;&gt;&lt;img class=&quot;img thumbnail-image&quot; src=&quot;&#x27;+resLink+&#x27;&quot;/&gt;&lt;/figure&gt;&#x27;</span><br><span class="hljs-code">            resImgLength = resImgLength + 1 </span><br><span class="hljs-code">          &#125;</span><br><span class="hljs-code">          if(restype !== &#x27;image&#x27;)&#123;</span><br><span class="hljs-code">            resUrl += &#x27;&lt;a target=&quot;_blank&quot; rel=&quot;noreferrer&quot; href=&quot;&#x27;+resLink+&#x27;&quot;&gt;&#x27;+resourceList[j].filename+&#x27;&lt;/a&gt;&#x27;</span><br><span class="hljs-code">          &#125;</span><br><span class="hljs-code">        &#125;</span><br><span class="hljs-code">        if(imgUrl)&#123;</span><br><span class="hljs-code">          var resImgGrid = &quot;&quot;</span><br><span class="hljs-code">          if(resImgLength !== 1)&#123;var resImgGrid = &quot; grid grid-&quot;+resImgLength&#125;</span><br><span class="hljs-code">          bbContREG += &#x27;&lt;div class=&quot;resimg&#x27;+resImgGrid+&#x27;&quot;&gt;&#x27;+imgUrl+&#x27;&lt;/div&gt;&#x27;</span><br><span class="hljs-code">        &#125;</span><br><span class="hljs-code">        if(resUrl)&#123;</span><br><span class="hljs-code">          bbContREG += &#x27;&lt;div class=&quot;resour&quot;&gt;&#x27;+resUrl+&#x27;&lt;/div&gt;&#x27;</span><br><span class="hljs-code">        &#125;</span><br><span class="hljs-code">      &#125;</span><br><span class="hljs-code">      var EnvNow = &#x27;&#x27;</span><br><span class="hljs-code">      if(twiEnv &amp;&amp; twiEnv != &quot;undefined&quot;)&#123;</span><br><span class="hljs-code">        EnvNow = twiEnv.replace(/https\:\/\/.*\.(.*)\..*/,&#x27;$1&#x27;)</span><br><span class="hljs-code">      &#125;</span><br><span class="hljs-code">      if(artEnv &amp;&amp; artEnv != &quot;undefined&quot;)&#123;</span><br><span class="hljs-code">        EnvNow = artEnv.replace(/https\:\/\/.*\.(.*)\..*/,&#x27;$1&#x27;)</span><br><span class="hljs-code">      &#125;</span><br><span class="hljs-code">      result += &#x27;&lt;li class=&quot;&#x27;+EnvNow+&#x27;memo-&#x27;+memoId+&#x27;&quot;&gt;&lt;div class=&quot;bbs-avatar&quot;&gt;&lt;a href=&quot;&#x27;+data[i].home+&#x27;&quot; target=&quot;_blank&quot; rel=&quot;noopener noreferrer&quot;&gt;&lt;img src=&quot;&#x27;+data[i].imgsrc+&#x27;&quot; alt=&quot;&quot; style=&quot;margin-bottom: 18px;&quot;&gt;&lt;/a&gt;&lt;a href=&quot;&#x27;+memoUrl+&#x27;&quot; target=&quot;_blank&quot; rel=&quot;noopener noreferrer&quot; class=&quot;bbs-creator&quot;&gt;&#x27;+data[i].creator+&#x27;&lt;/a&gt;&lt;span class=&quot;bbs-dot&quot;&gt;·&lt;/span&gt;&lt;span class=&quot;bbs-date&quot;&gt;&#x27;+new Date(data[i].updatedTs * 1000).toLocaleString()+&#x27;&lt;/span&gt;&#x27;</span><br><span class="hljs-code">      var comSVG = &#x27;&lt;span class=&quot;bbs-coment-svg&quot;&gt;&lt;svg class=&quot;icon&quot; viewBox=&quot;0 0 1024 1024&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot; width=&quot;20&quot; height=&quot;24&quot;&gt;&lt;path d=&quot;M816 808H672c-4.8 0-8 1.6-11.2 4.8l-80 80c-36.8 36.8-97.6 36.8-136 0l-80-80c-3.2-3.2-6.4-4.8-11.2-4.8h-144c-70.4 0-128-57.6-128-128V232c0-70.4 57.6-128 128-128h608c70.4 0 128 57.6 128 128v448C944 750.4 886.4 808 816 808zm0-64c35.2 0 64-28.8 64-64V232c0-35.2-28.8-64-64-64H208c-35.2 0-64 28.8-64 64v448c0 35.2 28.8 64 64 64h144c20.8 0 41.6 8 56 24l80 80c12.8 12.8 32 12.8 44.8 0l80-80c14.4-14.4 35.2-24 56-24H816zM320 408c27.2 0 48 20.8 48 48v32c0 27.2-20.8 48-48 48s-48-20.8-48-48v-32c0-27.2 20.8-48 48-48zm192 0c27.2 0 48 20.8 48 48v32c0 27.2-20.8 48-48 48s-48-20.8-48-48v-32c0-27.2 20.8-48 48-48zm192 0c27.2 0 48 20.8 48 48v32c0 27.2-20.8 48-48 48s-48-20.8-48-48v-32c0-27.2 20.8-48 48-48z&quot; /&gt;&lt;/svg&gt;&lt;/span&gt;&#x27;</span><br><span class="hljs-code">      var outSVG = &#x27;&lt;span class=&quot;bbs-coment-svg&quot;&gt;&lt;svg class=&quot;icon&quot; viewBox=&quot;0 0 1024 1024&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot; width=&quot;20&quot; height=&quot;20&quot;&gt;&lt;path d=&quot;M864 640a32 32 0 0 1 64 0v224.096A63.936 63.936 0 0 1 864.096 928H159.904A63.936 63.936 0 0 1 96 864.096V159.904C96 124.608 124.64 96 159.904 96H384a32 32 0 0 1 0 64H192.064A31.904 31.904 0 0 0 160 192.064v639.872A31.904 31.904 0 0 0 192.064 864h639.872A31.904 31.904 0 0 0 864 831.936V640zm-485.184 52.48a31.84 31.84 0 0 1-45.12-.128 31.808 31.808 0 0 1-.128-45.12L815.04 166.048l-176.128.736a31.392 31.392 0 0 1-31.584-31.744 32.32 32.32 0 0 1 31.84-32l255.232-1.056a31.36 31.36 0 0 1 31.584 31.584L924.928 388.8a32.32 32.32 0 0 1-32 31.84 31.392 31.392 0 0 1-31.712-31.584l.736-179.392L378.816 692.48z&quot;/&gt;&lt;/svg&gt;&lt;/span&gt;&#x27;</span><br><span class="hljs-code">      if(comment == &#x27;1&#x27;)&#123;</span><br><span class="hljs-code">        if(twiEnv &amp;&amp; twiEnv != &#x27;undefined&#x27;)&#123;</span><br><span class="hljs-code">          result += &#x27;&lt;a data-id=&quot;&#x27;+memoId+&#x27;&quot; data-twienv=&quot;&#x27;+twiEnv+&#x27;&quot; data-path=&quot;&#x27;+memoUrl+&#x27;&quot; onclick=&quot;loadTwikoo(this)&quot; onmouseenter=&quot;insertTwikoo(this)&quot; href=&quot;javascript:void(0)&quot; rel=&quot;noopener noreferrer&quot;&gt;&#x27;+comSVG+&#x27;&lt;/a&gt;&lt;/div&gt;&lt;div class=&quot;bbs-content&quot;&gt;&lt;div class=&quot;bbs-text&quot;&gt;&#x27;+bbContREG+&#x27;&lt;/div&gt;&lt;div class=&quot;item-comment twikoo-&#x27;+memoId+&#x27; d-none&quot;&gt;&lt;div id=&quot;&#x27;+EnvNow+&#x27;twikoo-&#x27;+memoId+&#x27;&quot;&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&#x27;</span><br><span class="hljs-code">        &#125;else if(artEnv &amp;&amp; artEnv != &#x27;undefined&#x27;)&#123;</span><br><span class="hljs-code">          result += &#x27;&lt;a data-id=&quot;&#x27;+memoId+&#x27;&quot; data-artenv=&quot;&#x27;+artEnv+&#x27;&quot; data-artsite=&quot;&#x27;+artSite+&#x27;&quot; data-path=&quot;&#x27;+memoUrl+&#x27;&quot; onclick=&quot;loadArtalk(this)&quot; href=&quot;javascript:void(0)&quot; rel=&quot;noopener noreferrer&quot;&gt;&#x27;+comSVG+&#x27;&lt;/a&gt;&lt;/div&gt;&lt;div class=&quot;bbs-content&quot;&gt;&lt;div class=&quot;bbs-text&quot;&gt;&#x27;+bbContREG+&#x27;&lt;/div&gt;&lt;div class=&quot;item-comment &#x27;+EnvNow+&#x27;artalk-&#x27;+memoId+&#x27; d-none&quot;&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&#x27;</span><br><span class="hljs-code">        &#125;else&#123;</span><br><span class="hljs-code">          result += &#x27;&lt;a href=&quot;&#x27;+memoUrl+&#x27;&quot; target=&quot;_blank&quot; rel=&quot;noopener noreferrer&quot;&gt;&#x27;+outSVG+&#x27;&lt;/a&gt;&lt;/div&gt;&lt;div class=&quot;bbs-content&quot;&gt;&lt;div class=&quot;bbs-text&quot;&gt;&#x27;+bbContREG+&#x27;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&#x27;</span><br><span class="hljs-code">        &#125;</span><br><span class="hljs-code">      &#125;else&#123;</span><br><span class="hljs-code">        result += &#x27;&lt;/div&gt;&lt;div class=&quot;bbs-content&quot;&gt;&lt;div class=&quot;bbs-text&quot;&gt;&#x27;+bbContREG+&#x27;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&#x27;</span><br><span class="hljs-code">      &#125;</span><br><span class="hljs-code">  &#125;</span><br><span class="hljs-code">  var bbBefore = &quot;&lt;section class=&#x27;bbs-timeline&#x27;&gt;&lt;ul class=&#x27;list&#x27;&gt;&quot;</span><br><span class="hljs-code">  var bbAfter = &quot;&lt;/ul&gt;&lt;/section&gt;&quot;</span><br><span class="hljs-code">  resultAll = bbBefore + result + bbAfter</span><br><span class="hljs-code">  bbDom.insertAdjacentHTML(&#x27;beforeend&#x27;, resultAll);</span><br><span class="hljs-code">  var btn = document.querySelector(&#x27;button.button-load&#x27;)</span><br><span class="hljs-code">  if(btn)&#123;</span><br><span class="hljs-code">    btn.textContent= &#x27;加载更多&#x27;;</span><br><span class="hljs-code">  &#125;</span><br><span class="hljs-code">  window.ViewImage &amp;&amp; ViewImage.init(&#x27;.bbs-content img&#x27;)</span><br><span class="hljs-code">  window.Lately &amp;&amp; Lately.init(&#123; target: &#x27;.bbs-date&#x27; &#125;);</span><br><span class="hljs-code">&#125;</span><br><span class="hljs-code">&lt;/script&gt;</span><br></code></pre></td></tr></table></figure>        </div>      </div>    </div></li><li><p>自定义CSS样式：</p>    <div class="fold">      <div class="fold-title fold-info collapsed" data-toggle="collapse" href="#collapse-dcdac752" role="button" aria-expanded="false" aria-controls="collapse-dcdac752">        <div class="fold-arrow">▶</div>CSS      </div>      <div class="fold-collapse collapse" id="collapse-dcdac752">        <div class="fold-content">          <figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-id">#bbs</span>&#123;<span class="hljs-attribute">padding</span>: <span class="hljs-number">2rem</span> <span class="hljs-number">0</span>;&#125;<br><span class="hljs-selector-id">#bbs-urls</span>&#123;<span class="hljs-attribute">margin-top</span>: <span class="hljs-number">2rem</span>;&#125;<br><span class="hljs-selector-class">.bbs-urls</span>&#123;<span class="hljs-attribute">display</span>:inline-block;<span class="hljs-attribute">background</span>: <span class="hljs-number">#4a4b50</span>;<span class="hljs-attribute">border-radius</span>:<span class="hljs-number">10%</span>;<span class="hljs-attribute">margin</span>:<span class="hljs-number">0</span> .<span class="hljs-number">6rem</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span>;<span class="hljs-attribute">padding</span>:<span class="hljs-number">4px</span>;<span class="hljs-attribute">width</span>:<span class="hljs-number">3.4rem</span>;<span class="hljs-attribute">height</span>:<span class="hljs-number">3.4rem</span>;<span class="hljs-attribute">cursor</span>: pointer;<span class="hljs-attribute">vertical-align</span>: text-bottom;&#125;<br><span class="hljs-selector-class">.bbs-urls</span> <span class="hljs-selector-tag">img</span>&#123;<span class="hljs-attribute">border-radius</span>:<span class="hljs-number">50%</span>;<span class="hljs-attribute">width</span>:<span class="hljs-number">100%</span>;<span class="hljs-attribute">height</span>:<span class="hljs-number">100%</span>;&#125;<br><span class="hljs-selector-class">.bbs-urls</span><span class="hljs-selector-class">.url-now</span>&#123;<span class="hljs-attribute">background</span>:<span class="hljs-number">#42b983</span>;<span class="hljs-attribute">transition</span>: <span class="hljs-number">0.6s</span>;&#125;<br><span class="hljs-selector-class">.urls-button</span> svg<span class="hljs-selector-class">.icon</span>&#123;<span class="hljs-attribute">padding</span>:<span class="hljs-number">10px</span>;<span class="hljs-attribute">width</span>:<span class="hljs-number">100%</span>;<span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;&#125;<br><span class="hljs-selector-class">.bbs-timeline</span> <span class="hljs-selector-tag">ul</span> &#123;<span class="hljs-attribute">margin</span>:<span class="hljs-number">0</span>;<span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span>;&#125;<br><span class="hljs-selector-class">.bbs-timeline</span> <span class="hljs-selector-tag">ul</span> <span class="hljs-selector-tag">li</span>&#123;<span class="hljs-attribute">list-style-type</span>:none;<span class="hljs-attribute">position</span>:relative;&#125;<br><span class="hljs-selector-class">.bbs-timeline</span>&#123;<span class="hljs-attribute">max-width</span>:<span class="hljs-number">1200px</span>;<span class="hljs-attribute">margin</span>:<span class="hljs-number">0</span> auto;&#125;<br><span class="hljs-selector-class">.bbs-avatar</span>&#123;<span class="hljs-attribute">position</span>: relative;&#125;<br><span class="hljs-selector-class">.bbs-avatar</span> <span class="hljs-selector-tag">img</span>&#123;<span class="hljs-attribute">width</span>:<span class="hljs-number">24px</span>;<span class="hljs-attribute">height</span>:<span class="hljs-number">24px</span>;<span class="hljs-attribute">border-radius</span>:<span class="hljs-number">50%</span>;<span class="hljs-attribute">margin-right</span>:<span class="hljs-number">1rem</span>;&#125;<br><span class="hljs-selector-tag">div</span><span class="hljs-selector-class">.bbs-avatar</span> &gt; <span class="hljs-selector-tag">img</span> &#123;<br>    <span class="hljs-attribute">display</span>: inline-block;<br>&#125;<br><span class="hljs-selector-class">.bbs-creator</span>,<span class="hljs-selector-class">.bbs-date</span>,<span class="hljs-selector-class">.bbs-dot</span>&#123;<span class="hljs-attribute">position</span>:relative;<span class="hljs-attribute">top</span>:-<span class="hljs-number">5px</span>;&#125;<br><span class="hljs-selector-class">.bbs-dot</span>&#123;<span class="hljs-attribute">font-weight</span>: <span class="hljs-number">800</span>;<span class="hljs-attribute">margin</span>:<span class="hljs-number">0</span> .<span class="hljs-number">5rem</span>;&#125;<br><span class="hljs-selector-class">.bbs-content</span> &#123;<span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">3rem</span>;<br>    <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">5px</span>;<br>    <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#F6F9FE</span>;<br>    <span class="hljs-attribute">border</span>: <span class="hljs-number">3px</span> solid <span class="hljs-number">#F6F9FE</span>;&#125;<br><span class="hljs-selector-class">.bbs-text</span>,<span class="hljs-selector-class">.resour</span>&#123;<span class="hljs-attribute">background</span>: <span class="hljs-built_in">var</span>(--color-block);<span class="hljs-attribute">border-radius</span>: <span class="hljs-number">8px</span>;<span class="hljs-attribute">font-size</span>: <span class="hljs-number">1em</span>;<span class="hljs-attribute">padding</span>:<span class="hljs-number">10px</span> <span class="hljs-number">14px</span>;<span class="hljs-attribute">position</span>: relative;&#125;<br><span class="hljs-selector-class">.resour</span>&#123;<span class="hljs-attribute">font-size</span>: <span class="hljs-number">0.9rem</span>;<span class="hljs-attribute">margin-top</span>: <span class="hljs-number">2px</span>;<span class="hljs-attribute">padding</span>: <span class="hljs-number">5px</span> <span class="hljs-number">14px</span>;&#125;<br><span class="hljs-selector-class">.bbs-text</span>&#123;<span class="hljs-attribute">overflow</span>:hidden;<span class="hljs-attribute">max-height</span>:<span class="hljs-number">90vh</span>;&#125;<br><span class="hljs-selector-class">.bbs-text</span> <span class="hljs-selector-tag">blockquote</span>&#123;<span class="hljs-attribute">font-family</span>: KaiTi,STKaiti,STFangsong;<span class="hljs-attribute">margin</span>:<span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">1rem</span>;<span class="hljs-attribute">padding</span>:.<span class="hljs-number">25rem</span> <span class="hljs-number">2rem</span>;<span class="hljs-attribute">position</span>: relative;<span class="hljs-attribute">border-left</span>:<span class="hljs-number">0</span> none;&#125;<br><span class="hljs-selector-class">.bbs-text</span> <span class="hljs-selector-tag">blockquote</span><span class="hljs-selector-pseudo">::before</span>&#123;<span class="hljs-attribute">line-height</span>: <span class="hljs-number">2rem</span>;<span class="hljs-attribute">content</span>: <span class="hljs-string">&quot;“&quot;</span>;<span class="hljs-attribute">font-family</span>: Georgia, serif;<span class="hljs-attribute">font-size</span>: <span class="hljs-number">28px</span>;<span class="hljs-attribute">font-weight</span>: bold;<span class="hljs-attribute">position</span>: absolute;<span class="hljs-attribute">left</span>: <span class="hljs-number">10px</span>;<span class="hljs-attribute">top</span>:<span class="hljs-number">5px</span>;&#125;<br><span class="hljs-selector-class">.bbs-text</span> <span class="hljs-selector-tag">p</span>&#123;<span class="hljs-attribute">margin</span>:<span class="hljs-number">0</span>;&#125;<br><span class="hljs-selector-class">.bbs-text</span> pre <span class="hljs-selector-tag">p</span>&#123;<span class="hljs-attribute">display</span>: inline-block;&#125;<br><span class="hljs-selector-class">.bbs-text</span> pre <span class="hljs-selector-tag">p</span><span class="hljs-selector-pseudo">:empty</span>&#123;<span class="hljs-attribute">display</span>: none;&#125;<br><span class="hljs-selector-class">.tag-span</span>&#123;<span class="hljs-attribute">color</span>: <span class="hljs-number">#42b983</span>;&#125;<br><span class="hljs-selector-id">#load</span> <span class="hljs-selector-tag">button</span><span class="hljs-selector-class">.load-btn</span>&#123;<span class="hljs-attribute">width</span>:<span class="hljs-number">100%</span>;<span class="hljs-attribute">padding</span>:<span class="hljs-number">8px</span> <span class="hljs-number">0</span>;<span class="hljs-attribute">background</span>: <span class="hljs-built_in">var</span>(--color-block);&#125;<br><span class="hljs-selector-id">#bb-footer</span>&#123;<span class="hljs-attribute">letter-spacing</span>:<span class="hljs-number">8px</span>;<span class="hljs-attribute">margin</span>:<span class="hljs-number">5rem</span> auto <span class="hljs-number">1rem</span>;<span class="hljs-attribute">text-align</span>:center;&#125;<br><span class="hljs-selector-class">.dark</span> <span class="hljs-selector-class">.bbs-text</span>,<span class="hljs-selector-class">.dark</span> <span class="hljs-selector-class">.resour</span>&#123;<span class="hljs-attribute">background</span>:<span class="hljs-number">#4a4b50</span>;&#125;<br><span class="hljs-selector-class">.dark</span> <span class="hljs-selector-class">.bbs-text</span> <span class="hljs-selector-tag">p</span>&#123;<span class="hljs-attribute">color</span>:<span class="hljs-number">#fafafa</span>;&#125;<br><span class="hljs-selector-class">.loader</span> &#123;<span class="hljs-attribute">position</span>: relative;<span class="hljs-attribute">margin</span>:<span class="hljs-number">3rem</span> auto;<span class="hljs-attribute">width</span>: <span class="hljs-number">100px</span>;&#125;<br><span class="hljs-selector-class">.loader</span><span class="hljs-selector-pseudo">::before</span> &#123;<span class="hljs-attribute">content</span>: <span class="hljs-string">&#x27;&#x27;</span>;<span class="hljs-attribute">display</span>: block;<span class="hljs-attribute">padding-top</span>: <span class="hljs-number">100%</span>;&#125;<br><span class="hljs-selector-class">.circular</span> &#123;<span class="hljs-attribute">animation</span>: rotate <span class="hljs-number">2s</span> linear infinite;<span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;<span class="hljs-attribute">transform-origin</span>: center center;<span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;<span class="hljs-attribute">position</span>: absolute;<span class="hljs-attribute">top</span>: <span class="hljs-number">0</span>;<span class="hljs-attribute">bottom</span>: <span class="hljs-number">0</span>;<span class="hljs-attribute">left</span>: <span class="hljs-number">0</span>;<span class="hljs-attribute">right</span>: <span class="hljs-number">0</span>;<span class="hljs-attribute">margin</span>: auto;&#125;<br><span class="hljs-selector-class">.path</span> &#123;stroke-dasharray: <span class="hljs-number">1</span>, <span class="hljs-number">200</span>;stroke-dashoffset: <span class="hljs-number">0</span>;<span class="hljs-attribute">animation</span>: dash <span class="hljs-number">1.5s</span> ease-in-out infinite, color <span class="hljs-number">6s</span> ease-in-out infinite;stroke-linecap: round;&#125;<br><span class="hljs-keyword">@keyframes</span> rotate &#123;<span class="hljs-number">100%</span> &#123;<span class="hljs-attribute">transform</span>: <span class="hljs-built_in">rotate</span>(<span class="hljs-number">360deg</span>);&#125;&#125;<br><span class="hljs-keyword">@keyframes</span> dash &#123;<br>  <span class="hljs-number">0%</span> &#123;stroke-dasharray: <span class="hljs-number">1</span>, <span class="hljs-number">200</span>;stroke-dashoffset: <span class="hljs-number">0</span>;&#125;<br>  <span class="hljs-number">50%</span> &#123;stroke-dasharray: <span class="hljs-number">89</span>, <span class="hljs-number">200</span>;stroke-dashoffset: -<span class="hljs-number">35px</span>;&#125;<br>  <span class="hljs-number">100%</span> &#123;stroke-dasharray: <span class="hljs-number">89</span>, <span class="hljs-number">200</span>;stroke-dashoffset: -<span class="hljs-number">124px</span>;&#125;<br>&#125;<br><span class="hljs-keyword">@keyframes</span> <span class="hljs-attribute">color</span> &#123;<br>  <span class="hljs-number">100%</span>,<span class="hljs-number">0%</span> &#123;stroke: <span class="hljs-number">#d62d20</span>;&#125;<span class="hljs-number">40%</span> &#123;stroke: <span class="hljs-number">#0057e7</span>;&#125;<span class="hljs-number">66%</span> &#123;stroke: <span class="hljs-number">#008744</span>;&#125;<span class="hljs-number">80%</span>,<span class="hljs-number">90%</span> &#123;stroke: <span class="hljs-number">#ffa700</span>;&#125;<br>&#125;<br><span class="hljs-selector-class">.bbs-content</span> <span class="hljs-selector-tag">p</span> &gt; <span class="hljs-selector-tag">img</span>&#123;<span class="hljs-attribute">cursor</span>:pointer;<span class="hljs-attribute">border</span>:<span class="hljs-number">1px</span> solid <span class="hljs-number">#3b3d42</span>;&#125;<br><span class="hljs-selector-class">.bbs-content</span> <span class="hljs-selector-tag">p</span><span class="hljs-selector-pseudo">:has</span>(<span class="hljs-selector-tag">img</span><span class="hljs-selector-class">.img</span>)&#123;<span class="hljs-attribute">display</span>: inline-block;&#125;<br><span class="hljs-selector-class">.bbs-text</span> <span class="hljs-selector-tag">p</span> &gt; <span class="hljs-selector-tag">img</span> &#123;<span class="hljs-attribute">display</span>: block;&#125;<br><span class="hljs-selector-class">.bbs-text</span> <span class="hljs-selector-tag">p</span> &gt; <span class="hljs-selector-tag">img</span><span class="hljs-selector-pseudo">:first</span>-child<span class="hljs-selector-pseudo">:nth-last-child</span>(n+<span class="hljs-number">2</span>),<span class="hljs-selector-class">.bbs-text</span> <span class="hljs-selector-tag">p</span> &gt; <span class="hljs-selector-tag">img</span><span class="hljs-selector-pseudo">:first</span>-child<span class="hljs-selector-pseudo">:nth-last-child</span>(n+<span class="hljs-number">2</span>) ~ <span class="hljs-selector-tag">img</span> &#123;<span class="hljs-attribute">display</span>: inline-block;&#125;<br><span class="hljs-selector-class">.bbs-content</span> <span class="hljs-selector-tag">p</span> &gt; <span class="hljs-selector-tag">img</span><span class="hljs-selector-class">.square</span>&#123;<span class="hljs-attribute">height</span>:<span class="hljs-number">180px</span>;<span class="hljs-attribute">width</span>:<span class="hljs-number">180px</span>;<span class="hljs-attribute">object-fit</span>:cover;&#125;<br><span class="hljs-selector-class">.resimg</span><span class="hljs-selector-class">.grid</span>&#123;<br>    <span class="hljs-attribute">display</span>: grid;<br>    <span class="hljs-attribute">grid-template-columns</span>: <span class="hljs-built_in">repeat</span>(<span class="hljs-number">3</span>,<span class="hljs-number">1</span>fr);<br>    <span class="hljs-attribute">grid-template-rows</span>:auto;<br>    <span class="hljs-attribute">gap</span>: <span class="hljs-number">4px</span>;<br>    <span class="hljs-attribute">width</span>: <span class="hljs-built_in">calc</span>(<span class="hljs-number">100%</span>* <span class="hljs-number">2</span> / <span class="hljs-number">3</span>);<br>    <span class="hljs-attribute">box-sizing</span>: border-box;<br>    <span class="hljs-attribute">margin</span>: <span class="hljs-number">4px</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span>;<br>&#125;<br><span class="hljs-selector-class">.resimg</span><span class="hljs-selector-class">.grid-2</span>&#123;<br>  <span class="hljs-attribute">grid-template-columns</span>: <span class="hljs-built_in">repeat</span>(<span class="hljs-number">2</span>, <span class="hljs-number">1</span>fr);<br>  <span class="hljs-attribute">width</span>: <span class="hljs-number">80%</span>;<br>&#125;<br><span class="hljs-selector-class">.resimg</span><span class="hljs-selector-class">.grid-4</span>&#123;<br>  <span class="hljs-attribute">grid-template-columns</span>: <span class="hljs-built_in">repeat</span>(<span class="hljs-number">2</span>, <span class="hljs-number">1</span>fr);<br>  <span class="hljs-attribute">width</span>: <span class="hljs-built_in">calc</span>(<span class="hljs-number">80%</span> * <span class="hljs-number">2</span> / <span class="hljs-number">3</span>);<br>&#125;<br><span class="hljs-selector-class">.resimg</span><span class="hljs-selector-class">.grid</span> <span class="hljs-selector-tag">figure</span><span class="hljs-selector-class">.gallery-thumbnail</span> &#123;<br>  <span class="hljs-attribute">position</span>: relative;<br>  <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;<br>  <span class="hljs-attribute">height</span>: <span class="hljs-number">0</span>;<br>  <span class="hljs-attribute">padding-top</span>: <span class="hljs-number">100%</span>;<br>  <span class="hljs-attribute">cursor</span>: zoom-in;<br>&#125;<br><span class="hljs-selector-class">.resimg</span> <span class="hljs-selector-tag">figure</span>&#123;<br>  <span class="hljs-attribute">text-align</span>: left;<br>  <span class="hljs-attribute">max-height</span>:<span class="hljs-number">50%</span>;<br>&#125;<br><span class="hljs-selector-class">.resimg</span> <span class="hljs-selector-tag">figure</span> <span class="hljs-selector-tag">img</span>&#123;<br>  <span class="hljs-attribute">max-height</span>:<span class="hljs-number">50vh</span>;<br>&#125;<br><span class="hljs-selector-class">.resimg</span><span class="hljs-selector-class">.grid</span> <span class="hljs-selector-tag">figure</span>, <span class="hljs-selector-tag">figcaption</span> &#123;<br>  <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span> <span class="hljs-meta">!important</span>;<br>&#125;<br><span class="hljs-selector-class">.resimg</span><span class="hljs-selector-class">.grid</span> <span class="hljs-selector-tag">figure</span><span class="hljs-selector-class">.gallery-thumbnail</span> &gt; <span class="hljs-selector-tag">img</span><span class="hljs-selector-class">.thumbnail-image</span> &#123;<br>  <span class="hljs-attribute">position</span>: absolute;<br>  <span class="hljs-attribute">left</span>: <span class="hljs-number">0</span>;<br>  <span class="hljs-attribute">top</span>: <span class="hljs-number">0</span>;<br>  <span class="hljs-attribute">display</span>: block;<br>  <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;<br>  <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;<br>  <span class="hljs-attribute">object-fit</span>: cover;<br>  <span class="hljs-attribute">object-position</span>: <span class="hljs-number">50%</span> <span class="hljs-number">50%</span>;<br>&#125;<br><span class="hljs-selector-class">.video-wrapper</span>&#123;<span class="hljs-attribute">position</span>:relative;<span class="hljs-attribute">padding-bottom</span>:<span class="hljs-number">55%</span>;<span class="hljs-attribute">width</span>:<span class="hljs-number">100%</span>;<span class="hljs-attribute">height</span>:<span class="hljs-number">0</span>&#125;<br><span class="hljs-selector-class">.video-wrapper</span> <span class="hljs-selector-tag">iframe</span>&#123;<span class="hljs-attribute">position</span>:absolute;<span class="hljs-attribute">height</span>:<span class="hljs-number">100%</span>;<span class="hljs-attribute">width</span>:<span class="hljs-number">100%</span>;&#125;<br></code></pre></td></tr></table></figure>        </div>      </div>    </div></li></ol>]]></content>
    
    
    <categories>
      
      <category>折腾记录</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Memos</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>启用霞鹜文楷字体</title>
    <link href="/posts/13197.html"/>
    <url>/posts/13197.html</url>
    
    <content type="html"><![CDATA[<p><img src="https://r2.snbing.com/img/2024/02/65bb5a0e3df05.png" alt="霞鹜文楷"></p><p>霞鹜文楷，名字取自王勃所作的一篇著名骈文《滕王阁序》-「落霞与孤鹜齐飞，秋水共长天一色」。</p><span id="more"></span><p>2020 年 12 月，日本著名字体厂商 FONTWORKS 在 GitHub 上开源了 7 款日文字体，在此当中，最受欢迎的当属它的「Klee」字体。<br>这款字体将仿宋和楷体两种风格融合，刚硬却又不失圆润。<br>国内一位开发者受到这款字体的启发，于 2021 年 1 月，开始尝试为这款日文字体补全简繁常用字。<br>历经一段时间的更新与调整后，「霞鹜文楷」横空出世，在 GitHub 开源，并丰富了中文开源字体中的楷体门类。</p><h2 id="引入字体"><a href="#引入字体" class="headerlink" title="引入字体"></a>引入字体</h2><p>直接调用 CDN，</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs css">&lt;link rel=&quot;stylesheet&quot; href=&quot;https://npm.elemecdn.com/lxgw-wenkai-screen-webfont/style.css<span class="hljs-string">&quot; media=&quot;</span>print<span class="hljs-string">&quot; onload=&quot;</span>this.media=<span class="hljs-string">&#x27;all&#x27;</span><span class="hljs-string">&quot;&gt;</span><br></code></pre></td></tr></table></figure><p>或 @一蓑烟雨 分享的 staticfile CDN</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs css">&lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.staticfile.org/lxgw-wenkai-screen-webfont/<span class="hljs-number">1.6</span>.<span class="hljs-number">0</span>/lxgwwenkaiscreen.css<span class="hljs-string">&quot; media=&quot;</span>print<span class="hljs-string">&quot; onload=&quot;</span>this.media=<span class="hljs-string">&#x27;all&#x27;</span><span class="hljs-string">&quot;&gt;</span><br></code></pre></td></tr></table></figure><h2 id="资料"><a href="#资料" class="headerlink" title="资料"></a>资料</h2><ul><li><p>霞鹜文楷字体作者的博客：<a href="https://lxgw.github.io/">https://lxgw.github.io/</a></p></li><li><p>霞鹜文楷字体 GitHub 项目页面：<a href="https://github.com/lxgw/LxgwWenKai">https://github.com/lxgw/LxgwWenKai</a></p></li><li><p>在网页上嵌入霞鹜文楷字体的 2 种方法——npm 和 cdn 引入，<a href="https://github.com/chawyehsu/lxgw-wenkai-webfont">https://github.com/chawyehsu/lxgw-wenkai-webfont</a></p></li><li><p>启用「霞鹜文楷」在线字体：<a href="https://immmmm.com/lxgw-wenkai-webfont/">https://immmmm.com/lxgw-wenkai-webfont/</a></p></li></ul>]]></content>
    
    
    <categories>
      
      <category>折腾记录</category>
      
    </categories>
    
    
    <tags>
      
      <tag>霞鹜文楷</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>NAS初接触</title>
    <link href="/posts/43999.html"/>
    <url>/posts/43999.html</url>
    
    <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>之前经历过因为换手机并且忘记icloud恢复密钥，导致使用十多年的AppleID差点丢失！</p><span id="more"></span><p>最后回归属地补办了之前已经停用的手机号才找回账号。</p><p>丢失AppleID期间造成了很多的不便：</p><ul><li>通讯录全无</li><li>Apple Store付费购买&#x2F;买断的应用没法使用</li><li>iCloud家庭组共享相册无法找回</li><li>还有很多很多很多……</li></ul><p>当时就觉得将所有的资料存上云也并不一定是安全的，所以就有了使用NAS的想法！</p><h2 id="NAS"><a href="#NAS" class="headerlink" title="NAS"></a>NAS</h2><p>黑群晖DS920+，DSM 7.1.1-42962。</p><ul><li>两块块3T硬盘组<code>raid1</code></li><li>一块4T硬盘直接<code>basic</code></li></ul><h2 id="入门操作"><a href="#入门操作" class="headerlink" title="入门操作"></a>入门操作</h2><h3 id="启动SSH功能"><a href="#启动SSH功能" class="headerlink" title="启动SSH功能"></a>启动SSH功能</h3><p>控制面板搜索SSH并开启，如下图：<br><img src="https://r2.snbing.com/img/2024/02/65bb9ae83677d.png" alt="启动SSH功能"></p><h3 id="添加套件源"><a href="#添加套件源" class="headerlink" title="添加套件源"></a>添加套件源</h3><ul><li>我不是矿神 - <code>https://spk7.imnks.com/</code></li></ul><h3 id="备份windows11系统"><a href="#备份windows11系统" class="headerlink" title="备份windows11系统"></a>备份windows11系统</h3><p>详见：<a href="/posts/6081.html">windows11系统备份</a></p><h3 id="iPhone-Photos备份至群晖NAS"><a href="#iPhone-Photos备份至群晖NAS" class="headerlink" title="iPhone Photos备份至群晖NAS"></a>iPhone Photos备份至群晖NAS</h3><p>详见：<a href="/posts/35839.html">iPhone Photos备份至群晖NAS</a></p>]]></content>
    
    
    <categories>
      
      <category>折腾记录</category>
      
    </categories>
    
    
    <tags>
      
      <tag>NAS</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>npm图床搭建与使用</title>
    <link href="/posts/38779.html"/>
    <url>/posts/38779.html</url>
    
    <content type="html"><![CDATA[<p>由于各种原因，已经启用npm图床，改为自建图床！</p><span id="more"></span><p>首先我们需要登录Github并且创建一个仓库，本文取名为”benjamin-cdn”。</p><h2 id="npm注册-获取Token"><a href="#npm注册-获取Token" class="headerlink" title="npm注册&amp;获取Token"></a>npm注册&amp;获取Token</h2><ol><li><p>首先需要注册一个 npm 的账号并完成邮箱验证。访问：<a href="https://www.npmjs.com/signup/">npm 注册页面</a></p></li><li><p>在本地将我们在Github新建的仓库克隆下来</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">git <span class="hljs-built_in">clone</span> git@github.com:[username]/[AssetsRepo].git<br><span class="hljs-comment">#或者</span><br>git <span class="hljs-built_in">clone</span> https://github.com/[username]/[AssetsRepo].git<br></code></pre></td></tr></table></figure></li><li><p>在克隆仓库的文件夹内打开终端，属于以下指令切换回原生源</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm config <span class="hljs-built_in">set</span> registry https://registry.npmjs.org<br></code></pre></td></tr></table></figure></li><li><p>添加本地npm用户配置</p>   <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 仅第一次使用需要添加用户，之后会提示你输入你的npm账号密码以及注册邮箱</span><br>npm adduser<br><span class="hljs-comment"># 非第一次使用直接登录即可，之后会提示你输入你的npm账号密码以及注册邮箱</span><br>npm login<br></code></pre></td></tr></table></figure></li><li><p>运行<code>npm</code>初始化指令，把整个图床仓库打包，按照指示进行配置，注意需要事先确认你的包名没有和别人已发布的包重复，可以在npm官网搜索相应包名，搜不到就说明还没被占用。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm init<br></code></pre></td></tr></table></figure><p>最后会输出一段<code>package.json</code>，请求确认，输入<code>yes</code>即可。</p></li><li><p>此时输入发布指令，我们就可以把包发布到npm上</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm publish<br></code></pre></td></tr></table></figure></li><li><p>登录<a href="https://www.npmjs.com/">npm官网</a>，右上角<code>头像</code>-<code>Access Tokens</code>-<code>Generate New Token</code>。生成<code>npm Token</code>。（<code>npm Token</code>只会显示一次，请妥善保管）</p></li><li><p>登录Github并访问文章开始创建的仓库，添加一个名为<code>NPM_TOKEN</code>的<code>secrets</code>，把获取的Npm的 Access token输入进去</p></li><li><p>在本地仓库文件夹下新建<code>[AssetsRepo]/.github/workflows/autopublish.yml</code></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">name:</span> <span class="hljs-string">Node.js</span> <span class="hljs-string">Package</span><br><span class="hljs-comment"># 监测图床分支，2020年10月后github新建仓库默认分支改为main，记得更改</span><br><span class="hljs-attr">on:</span><br>  <span class="hljs-attr">push:</span><br>    <span class="hljs-attr">branches:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">master</span><br><br><span class="hljs-attr">jobs:</span><br>  <span class="hljs-attr">publish-npm:</span><br>    <span class="hljs-attr">runs-on:</span> <span class="hljs-string">ubuntu-latest</span><br>    <span class="hljs-attr">steps:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-attr">uses:</span> <span class="hljs-string">actions/checkout@v2</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-attr">uses:</span> <span class="hljs-string">actions/setup-node@v1</span><br>        <span class="hljs-attr">with:</span><br>          <span class="hljs-attr">node-version:</span> <span class="hljs-string">&quot;12.x&quot;</span><br>          <span class="hljs-attr">registry-url:</span> <span class="hljs-string">https://registry.npmjs.org/</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-attr">run:</span> <span class="hljs-string">npm</span> <span class="hljs-string">publish</span><br>        <span class="hljs-attr">env:</span><br>          <span class="hljs-attr">NODE_AUTH_TOKEN:</span> <span class="hljs-string">$&#123;&#123;secrets.npm_token&#125;&#125;</span><br></code></pre></td></tr></table></figure></li><li><p>在本地的仓库文件夹下打开终端，运行以下指令，上传新增内容至github，即可触发部署。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 将更改提交</span><br>git add .<br>git commit -m <span class="hljs-string">&quot;npm publish&quot;</span><br><span class="hljs-comment"># 更新package版本号</span><br>npm version patch<br><span class="hljs-comment"># 推送至github触发action</span><br>git push<br></code></pre></td></tr></table></figure><blockquote><p>此处的四行指令顺序严格。<br>每次更新 npm 图床都需要先修改<code>[AssetsRepo]\package.json</code>里的<code>version</code>,也就是版本号。<br>而<code>npm version patch</code>即为更新 package.json 里的版本号的指令，效果是末尾版本号+1，例如<code>0.0.1=&gt;0.0.2</code>、<code>1.1.3=&gt;1.1.4</code>。免去了打开<code>package.json</code>再修改版本号的麻烦。（大版本更新还是需要手动改的）<br>更新 npm 图床务必要记得更新<code>package.json</code>里的版本号！</p></blockquote></li></ol><h2 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h2><ol><li><p>jsdelivr+npm的图片引用和jsdelivr+github很相似，例如我在<code>[AssetsRepo]</code>仓库里存放的<code>/img/index.png</code></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs YAML"><span class="hljs-comment"># jsDelivr+github链接</span><br><span class="hljs-string">https://cdn.jsdelivr.net/gh/[GithubUserName]/[AssetsRepo]/img/index.png</span><br><span class="hljs-comment"># jsDelivr+npm链接</span><br><span class="hljs-string">https://cdn.jsdelivr.net/npm/[NpmPackageName]/img/index.png</span><br></code></pre></td></tr></table></figure></li><li><p>jsDelivr+Npm依然有100MB的包大小限制，但是NPM有丰富的国内节点。可以挑选一个使用。个人推荐知乎的。没有大小限制，而且也很稳定。</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs YAML"><span class="hljs-string">【jsd出品，网宿国内节点】</span><br><span class="hljs-string">https://cdn.jsdelivr.net/npm/:package@:version/:file</span><br><span class="hljs-string">【unpkg</span> <span class="hljs-string">自建】</span><br><span class="hljs-string">https://cdn.cbd.int/:package@:version/:file</span><br></code></pre></td></tr></table></figure></li><li><p>当然你也可以利用<a href="https://unpkg.com/">unpkg</a>自建。(UNPKG是一个内容源自npm的全球快速CDN。它部署在cloudflare上，在大陆地区访问到的是香港节点。所以速度也不错。)</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs YAML"><span class="hljs-string">https://unpkg.com/:package@:version/:file</span><br></code></pre></td></tr></table></figure></li></ol>]]></content>
    
    
    <categories>
      
      <category>折腾记录</category>
      
    </categories>
    
    
    <tags>
      
      <tag>npm</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Hexo备份到Github分支</title>
    <link href="/posts/16665.html"/>
    <url>/posts/16665.html</url>
    
    <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>如果你有多设备来写<code>Hexo</code>博客，或者有需要备份<code>Hexo</code>源文件的需求，那么这个办法可能是最简单最方便的！</p><h2 id="备份"><a href="#备份" class="headerlink" title="备份"></a>备份</h2><ol><li><p>将自己的Github项目克隆到本地；</p></li><li><p>将除了<code>.git</code>以外的所有文件删除；</p></li><li><p>拷贝自己本地<code>Hexo</code>源文件到上述文件夹；</p></li><li><p>检查<code>.gitignore</code>， 包含以下需要忽略的内容：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-string">.DS_Store</span><br><span class="hljs-string">Thumbs.db</span><br><span class="hljs-string">db.json</span><br><span class="hljs-string">*.log</span><br><span class="hljs-string">node_modules/</span><br><span class="hljs-string">public/</span><br><span class="hljs-string">.deploy*/</span><br></code></pre></td></tr></table></figure></li><li><p>创建并切换到新的备份分支（例：<code>bakcup</code>）：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">git checkout -b backup<br></code></pre></td></tr></table></figure></li><li><p>备份至Github：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">git add --all<br>git commit -m <span class="hljs-string">&quot;注释文字&quot;</span><br>git push -u origin backup<br></code></pre></td></tr></table></figure></li></ol><p>此时我们的Github仓库有了两个分支：</p><ul><li><code>main</code>：托管静态网页</li><li><code>backup</code>：备份Hexo源文件</li></ul><h2 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h2><p>如果主题是从Github克隆下来的，则会因为主题自身存在的<code>.git</code>文件夹导致无法成功上传主题文件。<br>解决办法：清理缓存，删除主题中的<code>.git</code>文件</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">git <span class="hljs-built_in">rm</span> --cached <span class="hljs-string">&quot;文件夹名字&quot;</span><br></code></pre></td></tr></table></figure><p>当然，我们也可以手动删除<code>.git</code>文件！</p><p><strong>Done！</strong></p>]]></content>
    
    
    <categories>
      
      <category>折腾记录</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Hexo</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>
